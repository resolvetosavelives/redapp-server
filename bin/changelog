#!/usr/bin/env ruby

last_release = ARGV[0]
diff = `git log #{last_release}..HEAD --oneline --decorate=no`
pretty_changelog = diff.strip.split("\n")
  .map { |line| line.match(/\s(.*)/)&.captures&.last }
  .reject { |line| line =~ /^Merge/ } # remove merge commits
  .compact
  .map { |line| "â€¢ #{line}" }
  .join("\n")

puts pretty_changelog
