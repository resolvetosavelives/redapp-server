<div class="page-header">
  <h1 class="page-title">Facilities</h1>
  <nav class="page-nav">
    <% if policy(Facility).new? %>
      <%= link_to 'New facility', new_admin_facility_path, class: "btn btn-sm btn-primary" %>
    <% end %>
  </nav>
</div>

<table class="table-responsive table">
  <thead class="thead-light">
    <tr>
      <th>Name</th>
      <th>Address</th>
      <th>Village/colony</th>
      <th>District</th>
      <th>State</th>
      <th>Country</th>
      <th>Pin</th>
      <th>Facility&nbsp;type</th>
      <th colspan="2"></th>
    </tr>
  </thead>

  <tbody>
    <% @facilities.each do |facility| %>
      <% facility_group = facility.facility_group %>
      <tr>
        <td class="nowrap"><%= link_to facility.name, [:admin, facility] %></td>
        <td><%= link_to facility_group.name, admin_organization_facility_group_path(facility_group.organization, facility_group) if facility_group.present? %></td>
        <td><%= facility.street_address %></td>
        <td><%= facility.village_or_colony %></td>
        <td><%= facility.district %></td>
        <td><%= facility.state %></td>
        <td><%= facility.country %></td>
        <td><%= facility.pin %></td>
        <td><%= facility.facility_type %></td>
        <% if policy(facility).edit? %>
          <td><%= link_to 'Edit', edit_admin_facility_path(facility) %></td>
        <% end %>
        <% if policy(facility).destroy? %>
          <td><%= link_to 'Delete', [:admin, facility], method: :delete, data: { confirm: "Are you sure you want to delete #{facility.name}?" } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
